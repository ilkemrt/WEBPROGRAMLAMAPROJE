@model Trainer

<section class="trainer-detail-hero">
    <div class="overlay"></div>

    <div class="container position-relative">
        <div class="row align-items-center">

            <!-- FOTO -->
            <div class="col-lg-4 text-center mb-4 mb-lg-0">
                <div class="trainer-profile-img">
                    <img src="@Model.ImageUrl" alt="@Model.FirstName" />
                </div>
            </div>

            <!-- BİLGİ -->
            <div class="col-lg-8 text-white">
                <span class="trainer-detail-badge">
                    @Model.Service?.Name Eğitmeni
                </span>

                <h1 class="display-5 fw-bold mt-3">
                    @Model.FirstName @Model.LastName
                </h1>


                @{
                    var todayWorking = Model.WorkingHours?
                    .FirstOrDefault(x => x.DayOfWeek == DateTime.Today.DayOfWeek);
                }

                @if (todayWorking != null)
                {
                    <span class="badge bg-success fs-6 mt-2">
                        Bugün Uygun
                    </span>
                }
                else
                {
                    <span class="badge bg-secondary fs-6 mt-2">
                        Bugün Çalışmıyor
                    </span>
                }


                <p class="lead mt-3 opacity-75">
                    @Model.Biography
                </p>

                <div class="mt-5 bg-dark bg-opacity-75 p-4 rounded shadow">

                    <h4 class="fw-bold mb-3 text-info">
                        Çalışma Bilgileri
                    </h4>

                    @if (Model.WorkingHours != null && Model.WorkingHours.Any())
                    {
                        <div class="row g-3">

                            @foreach (var wh in Model.WorkingHours.OrderBy(x => x.DayOfWeek))
                            {
                                <div class="col-md-4 col-sm-6">
                                    <div class="border border-secondary rounded p-3 h-100 text-white">

                                        <h6 class="fw-bold text-uppercase mb-2">
                                            @wh.DayOfWeek
                                        </h6>

                                        <span class="badge bg-success">
                                            @wh.StartTime - @wh.EndTime
                                        </span>

                                        @if (wh.DayOfWeek == DateTime.Today.DayOfWeek)
                                        {
                                            <span class="badge bg-warning text-dark ms-2">
                                                Bugün
                                            </span>
                                        }
                                    </div>
                                </div>
                            }

                        </div>
                    }
                    else
                    {
                        <div class="alert alert-warning">
                            Bu antrenör için çalışma saati tanımlanmamış.
                        </div>
                    }
                </div>


                <div class="mt-4 d-flex gap-3 flex-wrap">
                    @if (User.Identity.IsAuthenticated)
                    {
                        <a asp-controller="Appointment"
                           asp-action="CreateByTrainer"
                           asp-route-trainerId="@Model.Id"
                           class="btn btn-accent btn-lg px-5">
                            Bu Antrenörle Randevu Al
                        </a>
                    }
                    else
                    {
                        <a asp-controller="Account"
                           asp-action="Login"
                           class="btn btn-outline-light btn-lg px-5">
                            Giriş Yap & Randevu Al
                        </a>
                    }

                    <a asp-controller="Trainer"
                       asp-action="Index"
                       class="btn btn-outline-light btn-lg px-4">
                        ← Geri Dön
                    </a>
                </div>
            </div>

        </div>
    </div>
</section>
